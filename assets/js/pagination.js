(()=>{"use strict";var t=t||{};t.pagination={defaults:{button:document.querySelector(".at-pagination__button"),buttonText:document.querySelector(".at-pagination__button").innerHTML,pagination:document.querySelector(".at-pagination"),next:document.querySelector(".at-pagination .next"),paginationListSelector:"ul.page-numbers",paginationListItemsSelector:"li",itemsWrapper:document.querySelector(".at-block-post-grid__items"),itemsTag:"div",items:".at-block-post-grid__items .at-block-post-grid__item",currentPage:1,totalPages:null!==document.querySelector(".at-pagination__button")?parseInt(document.querySelector(".at-pagination__button").getAttribute("data-total-pages")):0,infiniteScroll:null!==document.querySelector(".at-pagination__button")&&"infinite-scroll"===document.querySelector(".at-pagination__button").getAttribute("data-pagination-type"),eventPrefix:"athemesblocks.postgrid",triggerOffset:200},domReady:function(t){if("function"==typeof t)return"interactive"===document.readyState||"complete"===document.readyState?t():void document.addEventListener("DOMContentLoaded",t,!1)},init:function(){if(void 0===this.defaults.button)return!1;if(null===this.defaults.pagination)return!1;const t=this.defaults.pagination.querySelector(this.defaults.paginationListSelector).querySelectorAll(this.defaults.paginationListItemsSelector),e=t[t.length-2],n="LI"===e.tagName?e.querySelector("a").textContent:e.textContent,i=this.stringIsNumber(n)?n:this.extractNumberFromString(n);this.defaults.totalPages=null!==i?parseInt(i):this.defaults.totalPages;const a=!!matchMedia("screen and (max-width: 767px)").matches;this.ename=a?"touchend":"click",this.defaults.button.addEventListener("click",this.loadMoreButtonEventHandler.bind(this)),this.defaults.button.addEventListener("touchend",this.loadMoreButtonEventHandler.bind(this)),this.defaults.infiniteScroll&&(this.infiniteScroll(),this.isAlmostInViewport(this.defaults.button)&&this.defaults.button.dispatchEvent(new Event(this.ename))),window.dispatchEvent(new Event(this.defaults.eventPrefix+".pagination.initialized"))},stringIsNumber:function(t){return!isNaN(t)&&!isNaN(parseFloat(t))},extractNumberFromString:function(t){const e=t.match(/-?\d+(\.\d+)?/);return e?e[0]:null},loadMoreButtonEventHandler:function(t){t.preventDefault(),this.defaults.button.classList.contains("loading")||this.loadMorePosts(this.defaults),this.defaults.button.classList.add("loading");const e=this.defaults.button.offsetHeight,n=this.defaults.button.offsetWidth;this.defaults.button.style.width=n+"px",this.defaults.button.style.height=e+"px",this.defaults.button.innerHTML='<div class="atb-spinner-loader"></div>'},loadMorePosts:function(){if(this.defaults.currentPage>=this.defaults.totalPages)return!1;const t=this,e=new XMLHttpRequest,n=this.defaults.next.getAttribute("href");e.open("GET",n,!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.onload=function(){if(this.status>=200&&this.status<400){const e=document.createElement("html");e.innerHTML=this.responseText;const n="function"==typeof Masonry&&t.defaults.itemsWrapper.classList.contains("masonry-brick"),i=n?Masonry.data(t.defaults.itemsWrapper.parentElement):"",a="function"==typeof Masonry&&t.defaults.itemsWrapper.classList.contains("masonry"),s=a?t.defaults.itemsWrapper.querySelector(t.defaults.items):"",o=a?Masonry.data(t.defaults.itemsWrapper):"",u=e.querySelectorAll(t.defaults.items);for(let e=0;e<u.length;e++){const r=document.createElement(t.defaults.itemsTag);r.setAttribute("class",u[e].classList.value),n||a||(r.classList.add("atb-animation-slide-in"),r.setAttribute("style","animation-delay: "+200*e+"ms;")),r.innerHTML=u[e].innerHTML,t.defaults.itemsWrapper.append(r),n?(i.appended(r),i.layout()):a&&(r.style.width=s.style.width,r.style.marginBottom=s.style.marginBottom,o.appended(r),o.layout())}t.defaults.button.classList.remove("loading"),t.maybeInitExtraFeatures(),t.updateNextURL(),t.defaults.infiniteScroll&&t.isAlmostInViewport(t.defaults.button)&&t.defaults.button.dispatchEvent(new Event("click")),t.removeSpinnerLoader(),t.hideButton(),window.dispatchEvent(new CustomEvent(t.defaults.eventPrefix+".pagination.items.added",{detail:{itemsAdded:u}}))}},e.send()},removeSpinnerLoader:function(){this.defaults.button.querySelector(".atb-spinner-loader").remove(),this.defaults.button.style.width="",this.defaults.button.style.height="",this.defaults.button.innerHTML=this.defaults.buttonText},updateNextURL:function(){let t=this.defaults.currentPage<this.defaults.totalPages?this.defaults.currentPage+1:this.defaults.currentPage,e=this.defaults.next.getAttribute("href").replace("/page/"+t,"/page/"+(t+1));this.defaults.next.getAttribute("href").indexOf("paged=")>0?e=this.defaults.next.getAttribute("href").replace("paged="+t,"paged="+(t+1)):this.defaults.next.getAttribute("href").indexOf("/comment-page-")>0?e=this.defaults.next.getAttribute("href").replace("/comment-page-"+t,"/comment-page-"+(t+1)):this.defaults.next.getAttribute("href").indexOf("cpage=")>0?e=this.defaults.next.getAttribute("href").replace("cpage="+t,"cpage="+(t+1)):this.defaults.next.getAttribute("href").indexOf("product-page=")>0&&(e=this.defaults.next.getAttribute("href").replace("product-page="+t,"product-page="+(t+1))),this.defaults.currentPage++,this.defaults.next.setAttribute("href",e)},hideButton:function(){this.defaults.currentPage>=this.defaults.totalPages&&this.defaults.button.remove()},infiniteScroll:function(){const t=this;window.addEventListener("scroll",(function(){t.isAlmostInViewport(t.defaults.button)&&t.defaults.button.dispatchEvent(new Event(t.ename))}))},maybeInitExtraFeatures:function(){"undefined"!=typeof a2a&&a2a.init_all()},isAlmostInViewport:function(t){return t.getBoundingClientRect().bottom-this.defaults.triggerOffset<=(window.innerHeight||document.documentElement.clientHeight)}},t.pagination.domReady(setTimeout((function(){t.pagination.init()}),100))})();
//# sourceMappingURL=pagination.js.map